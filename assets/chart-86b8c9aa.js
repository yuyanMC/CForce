var d=Object.defineProperty;var w=(o,s,t)=>s in o?d(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t;var i=(o,s,t)=>(w(o,typeof s!="symbol"?s+"":s,t),t);import{c as y}from"./util-720ff2c1.js";class n{constructor(s){i(this,"notes");i(this,"animationNotes");i(this,"length");this.notes=[],this.animationNotes=[],s.notes.forEach(t=>{let h=[];t.paths.forEach(a=>{h.push(n.parsePath(a))});let r=new l(h);t.type!=="I"?this.notes.push(new e(r,t.h,t.track,t.type,t.al,t.track=="A"?[0,220,240]:[220,70,20])):this.notes.push(new e(r,t.h,t.track,t.type,0,t.track=="A"?[0,220,240]:[220,70,20]))}),s.animationNotes.forEach(t=>{let h=[];t.paths.forEach(c=>{h.push(n.parsePath(c))});let r=new l(h),a;t.type!=="I"?a=new e(r,t.h,"M",t.type,t.al,t.fill):a=new e(r,t.h,"M",t.type,void 0,t.fill),a.ho=t.ho,a.hi=t.hi,this.animationNotes.push(a)}),this.length=s.length}static parsePath(s){let t=s,h=new p(0);switch(t.type){case"arc":h=new g(t.spd,t.c[0],t.c[1],t.f[0],t.f[1],t.t[0],t.t[1]);break;case"line":h=new P(t.spd,t.f[0],t.f[1],t.t[0],t.t[1]);break;case"static":h=new x(t.spd,t.pos[0],t.pos[1]);break;case"pow2":h=new E(n.parsePath(t.p),t.f,t.t);break;default:throw Error("Invalid path type")}return h}}class p{constructor(s){i(this,"spd");this.spd=s}cal(s){return[0,0]}}class x extends p{constructor(t,h,r){super(t);i(this,"x");i(this,"y");this.x=h,this.y=r}cal(t){return[this.x,this.y]}}class P extends p{constructor(t,h,r,a,c){super(t);i(this,"fx");i(this,"fy");i(this,"tx");i(this,"ty");this.fx=h,this.fy=r,this.tx=a,this.ty=c}cal(t){return[this.fx+(this.tx-this.fx)*t,this.fy+(this.ty-this.fy)*t]}}class g extends p{constructor(t,h,r,a,c,f=1600,u=900){super(t);i(this,"cx");i(this,"cy");i(this,"fromx");i(this,"fromy");i(this,"tox");i(this,"toy");if((a-h)**2+(c-r)**2-(f-h)**2-(u-r)**2>=.01)throw Error(`Invalid ArcPath for(${h} ${r} ${a} ${c} ${f} ${u})`);this.cx=h,this.cy=r,this.fromx=a,this.fromy=c,this.tox=f,this.toy=u}cal(t){if(t<0)return[this.fromx,this.fromy];if(t>1)return[this.tox,this.toy];let h=y(this.cx,this.cy,this.fromx,this.fromy),r=y(this.cx,this.cy,this.tox,this.toy),a=h+(r-h)*t,c=Math.sqrt((this.tox-this.cx)**2+(this.toy-this.cy)**2);return[Math.cos(a)*c+this.cx,Math.sin(a)*c+this.cy]}}class k extends p{constructor(t){super(t.spd);i(this,"p");this.p=t}}class E extends k{constructor(t,h=0,r=1){super(t);i(this,"f");i(this,"t");this.f=h,this.t=r}cal(t){return this.p.cal((this.f+(this.t-this.f)*t)**2)}}class l{constructor(s){i(this,"ps");this.ps=s}cal(s){for(let t=1;t<this.ssp.length;t++)if(s<this.ssp[t]){let h=(s-this.ssp[t-1])/(this.ssp[t]-this.ssp[t-1]);return this.ps[t-1].cal(h)}return this.ps[this.ps.length-1].cal(1)}get ssp(){let s=[],t=0;return s.push(0),this.ps.forEach(h=>{t+=h.spd,s.push(t/this.spd)}),s}get spd(){let s=0;return this.ps.forEach(t=>{s+=t.spd}),s}}class e{constructor(s,t,h,r,a,c){i(this,"p");i(this,"h");i(this,"a");i(this,"aa");i(this,"ho");i(this,"hi");i(this,"t");i(this,"y");i(this,"al");i(this,"_f");this.p=s,this.h=t,this.t=h,this.y=r,this.a=0,this.aa=0,this.y=="A"&&a==null&&(a=0),this.al=a,this._f=c||[64,64,64]}get f(){return this.t=="A"?[0,220,240]:this.t=="B"?[220,70,20]:this._f}set f(s){this._f=s}}function M(){return new l([new x(1e-4,1600,900)])}export{g as ArcPath,n as Chart,P as LinePath,l as MultiPath,e as Note,p as Path,E as Pow2SPath,x as StaticPath,M as nullPath};
